# Log Anomaly Detector Environment Configuration
# This file is managed by Ansible

# Core service configuration
LOKI_URL={{ cloud_services.log_anomaly.loki_url | default('http://192.168.1.143:3100') }}
CHECK_INTERVAL={{ cloud_services.log_anomaly.check_interval | default('30') }}
BATCH_SIZE={{ cloud_services.log_anomaly.batch_size | default('1000') }}

# Alert webhook configuration  
WEBHOOK_URL={{ cloud_services.log_anomaly.webhook_url | default('http://192.168.1.143:5678/webhook/log-anomaly') }}

# Statistical thresholds (raised for signal quality)
FREQUENCY_SIGMA={{ cloud_services.log_anomaly.frequency_sigma | default('4.0') }}
RATE_CHANGE_THRESHOLD={{ cloud_services.log_anomaly.rate_change_threshold | default('10.0') }}
ENTROPY_THRESHOLD={{ cloud_services.log_anomaly.entropy_threshold | default('6.5') }}
LEVENSHTEIN_THRESHOLD={{ cloud_services.log_anomaly.levenshtein_threshold | default('0.90') }}

# Signal quality settings
ALERT_COOLDOWN_MINUTES={{ cloud_services.log_anomaly.alert_cooldown_minutes | default('60') }}
MIN_SEVERITY={{ cloud_services.log_anomaly.min_severity | default('high') }}
MIN_PATTERN_SCORE={{ cloud_services.log_anomaly.min_pattern_score | default('3.0') }}
MIN_REPETITION_COUNT={{ cloud_services.log_anomaly.min_repetition_count | default('20') }}
SUPPRESSED_SERVICES={{ cloud_services.log_anomaly.suppressed_services | default('blackbox-exporter,promtail,node-exporter') }}
DASHBOARD_URL={{ cloud_services.log_anomaly.dashboard_url | default('http://ocean.home/d/log-anomaly-detector/log-anomaly-detector-tier-1') }}

# Time zone
TZ=America/Los_Angeles

# Python configuration
PYTHONPATH=/app/src
PYTHONUNBUFFERED=1
